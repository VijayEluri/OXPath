/**
 * 
 */
package uk.ac.ox.comlab.oxpath.placeRankDemo;

/**
 * Class for objects for encoding Thomson Local Queries
 * @author AndrewJSel
 *
 */
public class ThomsonLocalQuery implements SiteQuery {
	
	/**
	 * Basic Constructor for Thomson Local
	 * @param iCategory category (keywords) for query
	 * @param iDistance distance from postcode
	 */
	public ThomsonLocalQuery(String iCategory, Double iDistance) {
		this.category = iCategory;
		this.distance = iDistance;
	}

	/* (non-Javadoc)
	 * @see uk.ac.ox.comlab.oxpath.placeRankDemo.SiteQuery#getOXPath(java.lang.String)
	 */
	/**
	 * Method for returning OXPath expression for this object, given a specific postcode
	 * @param postcode postcode for query
	 * @return OXPath expression from this object for the given postcode
	 */
	@Override
	public String getOXPath(String postcode) {
		StringBuilder sb = new StringBuilder();
		sb.append("path={<http://www.thomsonlocal.com/>/}/descendant::field()[1]/{\"");
		sb.append(this.category);
		sb.append("\"}/following::field()[1]/{\"");
		sb.append(postcode);
		sb.append("\"}/following::field()[1]/{click/}/descendant::*[.#='Results 1'][last()]:<numResults=string(.)>;");
		return sb.toString();
	}
	
	//instance fields
	/**
	 * category (instance field)
	 */
	private String category;
	/**
	 * distance (instance field)
	 */
	private Double distance;

}
